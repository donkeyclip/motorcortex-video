{"version":3,"sources":["../../src/Incidents/Effect.js"],"names":["MotorCortex","require","effects","filter","VideoEffect","blur","brightness","contrast","grayscale","invert","opacity","saturate","sepia","obj","string","_effectsUnits","f","m","targetValues","Object","assign","initialValue","i","length","effect","targetValue","element","entity","ctx","_objToFilterValue","API","MonoIncident","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,WAAW,GAAGC,OAAO,CAAC,2BAAD,CAA3B;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,wBAAD,CAAP,CAAkCE,MAAlD;;IAEMC,W;;;;;;;;;;;;;sCACgB;AACd,aAAO;AACHC,QAAAA,IAAI,EAAE,CADH;AAEHC,QAAAA,UAAU,EAAE,CAFT;AAGHC,QAAAA,QAAQ,EAAE,CAHP;AAIHC,QAAAA,SAAS,EAAE,CAJR;AAKH,sBAAc,CALX;AAMHC,QAAAA,MAAM,EAAE,CANL;AAOHC,QAAAA,OAAO,EAAE,CAPN;AAQHC,QAAAA,QAAQ,EAAE,CARP;AASHC,QAAAA,KAAK,EAAE;AATJ,OAAP;AAWH;;;sCAgBiBC,G,EAAK;AACnB,UAAIC,MAAM,GAAG,EAAb;;AACA,WAAK,IAAMX,MAAX,IAAqBU,GAArB,EAA0B;AACtBC,QAAAA,MAAM,cAAOX,MAAP,cAAiBU,GAAG,CAACV,MAAD,CAApB,SAA+B,KAAKY,aAAL,CAAmBZ,MAAnB,CAA/B,OAAN;AACH;;AACD,aAAOW,MAAP;AACH;;;+BAEUE,C,EAAGC,C,EAAG;AACb,UAAMC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKC,YAAvB,CAArB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,OAAO,CAACqB,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,YAAME,MAAM,GAAGtB,OAAO,CAACoB,CAAD,CAAtB;;AACA,YAAI,KAAKD,YAAL,CAAkBG,MAAlB,MAA8B,KAAKC,WAAL,CAAiBD,MAAjB,CAAlC,EAA4D;AACxDN,UAAAA,YAAY,CAACM,MAAD,CAAZ,GAAuBR,CAAC,IAAI,KAAKS,WAAL,CAAiBD,MAAjB,IAA2B,KAAKH,YAAL,CAAkBG,MAAlB,CAA/B,CAAD,GAA6D,KAAKH,YAAL,CAAkBG,MAAlB,CAApF;AACH;AACJ;;AACD,WAAKE,OAAL,CAAaC,MAAb,CAAoBC,GAApB,CAAwBzB,MAAxB,GAAiC,KAAK0B,iBAAL,CAAuBX,YAAvB,CAAjC;AACH;;;wBA/BmB;AAChB,aAAO;AACHb,QAAAA,IAAI,EAAE,IADH;AAEHC,QAAAA,UAAU,EAAE,EAFT;AAGHC,QAAAA,QAAQ,EAAE,EAHP;AAIHC,QAAAA,SAAS,EAAE,EAJR;AAKH,sBAAc,KALX;AAMHC,QAAAA,MAAM,EAAE,EANL;AAOHC,QAAAA,OAAO,EAAE,EAPN;AAQHC,QAAAA,QAAQ,EAAE,EARP;AASHC,QAAAA,KAAK,EAAE;AATJ,OAAP;AAWH;;;;EA3BqBZ,WAAW,CAAC8B,GAAZ,CAAgBC,Y;;AAiD1CC,MAAM,CAACC,OAAP,GAAiB7B,WAAjB","sourcesContent":["const MotorCortex = require(\"@kissmybutton/motorcortex\");\nconst effects = require('../compositeAttributes').filter;\n\nclass VideoEffect extends MotorCortex.API.MonoIncident {\n    getScratchValue() {\n        return {\n            blur: 0,\n            brightness: 1,\n            contrast: 1,\n            grayscale: 0,\n            'hue-rotate': 0,\n            invert: 0,\n            opacity: 1,\n            saturate: 1,\n            sepia: 0\n        }\n    }\n\n    get _effectsUnits() {\n        return {\n            blur: 'px',\n            brightness: '',\n            contrast: '',\n            grayscale: '',\n            'hue-rotate': 'deg',\n            invert: '',\n            opacity: '',\n            saturate: '',\n            sepia: ''\n        }\n    }\n\n    _objToFilterValue(obj) {\n        let string = \"\";\n        for (const filter in obj) {\n            string += `${filter}(${obj[filter]}${this._effectsUnits[filter]}) `;\n        }\n        return string;\n    }\n\n    onProgress(f, m) {\n        const targetValues = Object.assign({}, this.initialValue);\n        for (let i = 0; i < effects.length; i++) {\n            const effect = effects[i];\n            if (this.initialValue[effect] !== this.targetValue[effect]) {\n                targetValues[effect] = f * (this.targetValue[effect] - this.initialValue[effect]) + this.initialValue[effect];\n            }\n        }\n        this.element.entity.ctx.filter = this._objToFilterValue(targetValues);\n    }\n}\n\nmodule.exports = VideoEffect;\n"],"file":"Effect.js"}