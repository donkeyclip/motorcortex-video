import DI from '../DescriptiveIncident';

const di = new DI(
  {
    a: 'a',
    b: 'b'
  },
  {
    duration: 1,
    c: 'c',
    d: 'd'
  }
);

test('Worng properties check', () => {
  const di2 = new DI(
    {
      a: 'a',
      b: 'b'
    },
    {
      duration: -1,
      repeats: -1,
      hiatus: -1,
      delay: -1,
      c: 'c',
      d: 'd'
    }
  );
  expect(di2.result).toBe(false);
  expect(di2.errors.length).toBe(4);
});

test('editing attributes on an unassigned DI should pass', () => {
  const res = di.editAttributes({ a: 'a1', b: 'b1' });
  expect(res).toEqual({
    result: true
  });

  expect(di.attrs).toEqual({
    a: 'a1',
    b: 'b1'
  });
});

test('editing properties by passing worng parameters should return result false with errors', ()=>{
  const res = di.editProperties({
    duration: -1,
    hiatus: -1,
    delay: -1,
    repeats: -1
  });

  expect(res.result).toBe(false);
  expect(res.errors.length).toBe(4);
});

test('editing properties on an unassigned DI should pass', () => {
  const res = di.editProperties({ c: 'c1', d: 'd1', duration: 1 });
  expect(res).toEqual({
    result: true
  });

  expect(di.props).toEqual({
    c: 'c1',
    d: 'd1',
    duration: 1
  });
});
