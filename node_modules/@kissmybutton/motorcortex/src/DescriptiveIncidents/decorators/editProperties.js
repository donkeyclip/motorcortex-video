import { _DIRECTIONS } from '../../Tree/_CONST';
import helper from '../../_coreUtils/Helper';
import { _TARGETTYPES } from '../_CONST';

function editProperties(payload) {
  payload.descriptor.value = function editPropertiesFunct(newProps) {
    const valitation = helper.validateProps({ props: newProps }, this.propsValidationRules, this.constructor);
    if (!valitation.result) {
      return valitation;
    }
    const checkIfBelongsToClip = this.putMessageOnPipe('checkForClip', {}, _TARGETTYPES._DECISIONAUTHORITY, {
      selfExecute: true,
      direction: _DIRECTIONS._UP
    });
    if (checkIfBelongsToClip.response === true) {
      // if the Group belongs on a Clip
      return this.manageEditAttrProps(newProps, 'props');
    }

    this.props = newProps;
    return {
      result: true
    };
  };
}

export default editProperties;
