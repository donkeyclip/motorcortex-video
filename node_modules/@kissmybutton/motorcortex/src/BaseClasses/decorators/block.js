import { _DIRECTIONS } from '../../Tree/_CONST';
import { getAnId } from '../../_coreUtils/Helper';

function block(pld) {
  pld.descriptor.value = function blockfunct(description) {
    if (this.blockID === undefined) {
      this.blockID = getAnId();
    }
    this.DescriptiveIncident.putMessageOnPipe(
      'setBlock',
      {
        id: this.blockID,
        description,
        incidentId: this.DescriptiveIncident.id,
        realIncidentId: this.id
      },
      'rootClip',
      { selfExecute: true, direction: _DIRECTIONS._UP }
    );
  };
}

export default block;
