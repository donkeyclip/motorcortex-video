"use strict";

var Helper = require('../../_coreUtils/Helper');

var helper = new Helper();

var _TREECONST = require('../../Tree/_CONST');

function block(pld) {
  pld.descriptor.value = function (description) {
    if (this.blockID === undefined) {
      this.blockID = helper.getAnId();
    }

    this.DescriptiveIncident.putMessageOnPipe('setBlock', {
      id: this.blockID,
      description: description,
      incidentId: this.DescriptiveIncident.id,
      realIncidentId: this.id
    }, 'rootClip', {
      selfExecute: true,
      direction: _TREECONST._DIRECTIONS._UP
    });
  };
}

module.exports = block;